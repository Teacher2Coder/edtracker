files:
  "/opt/elasticbeanstalk/hooks/appdeploy/pre/50build.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      cd /var/app/staging
      
      # Install server dependencies
      cd server
      npm install --production
      cd ..
      
      # Install client dependencies and build
      cd client
      npm install
      npm run build
      cd ..
      
      # Ensure server can find the built client files
      echo "Build process completed successfully" 