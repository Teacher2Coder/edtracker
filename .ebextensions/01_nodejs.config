option_settings:
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production
    NPM_USE_PRODUCTION: false
    SKIP_SEEDING: true
  aws:elasticbeanstalk:nodejs:
    NodeCommand: "npm start"
    NodeVersion: 22
  aws:elasticbeanstalk:command:
    Timeout: 2400
  aws:autoscaling:launchconfiguration:
    InstanceType: t3.micro
    SecurityGroups: default

container_commands:
  01_install_dependencies:
    command: "npm install"
    cwd: "/var/app/ondeck"
  02_build_client:
    command: "npm run build"
    cwd: "/var/app/ondeck"
  03_ensure_dist_exists:
    command: "mkdir -p client/dist"
    cwd: "/var/app/ondeck"
    ignoreErrors: true 